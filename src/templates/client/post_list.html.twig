<!DOCTYPE html>

<html lang="ja">
	<head>
		<meta charset="utf-8"/>
		<meta
		name="viewport" content="width=device-width, initial-scale=1">

		{# Bootstrap #}
		<link
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

		{# favicon #}
		<link
		rel="icon" href="/public/favicon-black.ico"/>

		{# javascript #}
		<script src="js/changeFavicon.js"></script>

		{# css #}
		<link rel="stylesheet" href="css/common.css" rel="stylesheet" type="text/css"/>
		<link
		rel="stylesheet" href="css/postList.css" rel="stylesheet" type="text/css"/>


		{# title #}
		<title>PhotoStudio -投稿一覧-</title>
	</head>

	<body>
		{% include 'common/header.html.twig' %}


		<div class="contents justify-content-start">
			<h1 class="mt-3 mb-3">
				投稿画像一覧
			</h1>

			<div class="accordion">
				{% for photo in photoArr %}
					<div class="accordion-item">
						<h2 class="accordion-header">
							<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#{{photo.photo_id}}" aria-expanded="true" aria-controls="{{photo.photo_id}}">
								<div class="d-flex justify-content-between w-100">
									<span>{{photo.photo_title}}</span>
									<img src="public/upload/{{photo.photo_url}}" alt="{{photo.photo_title}}" class="img-fluid me-4"/></div>
							</button>
						</h2>

						<div id="{{photo.photo_id}}" class="accordion-collapse collapse" data-bs-parent="#downloadAccordion">
							<div class="accordion-body">
								<img src="public/upload/{{photo.photo_url}}" alt="{{photo.photo_title}}" class="img-fluid"/>

								<div class="mb-2">
									<label>カテゴリー</label>
									<h5>{{photo.category}}</h5>
								</div>

								<div class="mb-2">
									<label>タグ</label>
									<div>
										{% for tag in photo.tags %}
											<span class="badge text-bg-white text-dark border border-dark">{{tag}}</span>
										{% endfor %}
									</div>
								</div>

								<div class="mb-2">
									<label>価格</label>
									<h5>
										¥<span id="price">{{photo.price}}</span>-
									</h5>
								</div>

								<div class="mb-2">
									<label>投稿時間</label>
									<h6>{{photo.upload_at}}</h6>
								</div>

								<div class="d-flex gap-2">
									<a class="btn btn-primary w-100 flex-grow-1" href="postList.php?photo_id={{photo.photo_id}}&action=show">
										{% if photo.is_deleted is even %}
											非公開にする
										{% else %}
											公開する
										{% endif %}
									</a>
									<button type="button" class="btn btn-danger w-100 flex-grow-1" data-bs-toggle="modal" data-bs-target="#deleteConfirmModal{{photo.photo_id}}">
										削除する
									</button>
								</div>

								{% include "common/delete_confirm_modal.html.twig" %}
							</div>
						</div>
					{% endfor %}
				</div>
			</div>
		</div>

		{# Bootstrap #}
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
	</body>
</html>
